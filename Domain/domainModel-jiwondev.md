# Domain model
## 학습 및 OTT 서비스
모바일과 IPTV에서 `동영상, 독서, 학습컨텐츠(VOD,HTML5)` 등을 제공해주는 앱입니다.
아래 그림에서 각 서비스별로 팀이 나뉘어져있습니다.

## 상세 도메인 다이어 그램
- 앱 진입 시 메인 홈/학습 홈이 나뉘어져있습니다.
- 메인 홈에서는 내 플레이리스트, 홈 지면, 이벤트 배너등을 제공합니다. 
- 학습 홈에서는 프로필별로 다른 커리큘럼 진도를 가진 학습 컨텐츠를 제공해줍니다.
```mermaid

flowchart LR
    
    고객 --> Mobile,IPTV
    Mobile,IPTV --> |홈 지면 및 컨텐츠 소비| 전시서비스
    Mobile,IPTV --> |프로필 시청이력 저장| 시청이력
    Mobile,IPTV <--> |로그인-인증 토큰발급| 회원.구독서비스
    subgraph 검색서비스
        direction LR
        검색 -->|컨텐츠 검색-조회| 컨텐츠서비스
    end

    subgraph 회원.구독서비스
        direction RL
        사용자 -->|1:3| 프로필
        사용자 -->|소셜로그인| SNS-ID
        사용자 -->|구독 여부 조회| 구독
        통신사 -->|통신사 매핑정보 연동| 사용자
        통신사 -->|구독 및 결제 연동| 구독
    end

    subgraph 컨텐츠서비스
        direction LR
        컨텐츠제작자 -->|자체 컨텐츠 제작| 컨텐츠
        컨텐츠편성자 -->|카테고리 편성| 컨텐츠
        TV방송센터 -->|TV 컨텐츠 동기화| 컨텐츠
    end

    subgraph 학습서비스
        direction LR

        학습통계 --> |리포트 생성| 월간리포트
        학습이력 --> |학습진도 갱신| 커리큘럼
        커리큘럼 -->|학습보상 요청| 보상-포인트
        커리큘럼 --> |프로필 통계반영| 학습통계
        커리큘럼 -->|컨텐츠 매핑| 학습컨텐츠
        
        시청이력 --> |출석정보 갱신|출석 --> 학습통계
        시청이력 --> condition{학습?}
        condition --> |시청보상 요청| 보상-포인트
        condition --> |학습이력 갱신| 학습이력

        보상-포인트 --> |프로필 통계반영| 학습통계
        학습컨텐츠 --> 퀴즈컨텐츠
        학습컨텐츠 -->|매핑된 컨텐츠 조회| 검색
    end

    subgraph 전시서비스
        direction LR
        메인홈
        배너-편성
        메인홈 -->|컨텐츠 검색| 검색
        플레이리스트 --> |컨텐츠 조회| 검색
        플레이리스트 --> |프로필 조회| 프로필
        학습홈 -->|프로필 커리큘럼 조회| 커리큘럼
        학습홈 -->|프로필 조회| 프로필
        메인홈 -->|사용자 권한 조회| 사용자
    end

    subgraph 메시지서비스
        direction LR
        월간리포트-->|리포트 알람톡 생성|메시지
        어드민 -->|템플릿 및 발송 설정| 메시지
        프로필 --- |발송 정보 조회|메시지
        메시지 -->|발송등록| Kakao
        메시지 -->|발송등록| Message --> 통신사LMS
        메시지 -->|발송등록| Push
    end

```

## 추상화된 다이어그램
```mermaid
    flowchart LR
    고객(고객)
    회원(회원)
    컨텐츠(컨텐츠)
    검색(검색)
    학습(학습)
    전시(전시)

    고객 --> |학습 완료| 학습이력
    고객 -->|컨텐츠 소비| 전시
    고객 -->|로그인, 가입| 인증
    인증 --> 회원
    전시 -->|구독 및 권한 조회|회원
    전시 -->|학습 커리큘럼 조회| 학습
    학습이력 -->|커리큘럼 반영| 학습

    전시 -->|컨텐츠 검색| 검색
    회원 -->|조회| 구독
    회원 <-->|연동|통신사
    통신사-->|갱신| 구독

    검색 --> 컨텐츠
    학습 --> |매핑 컨텐츠 조회|검색
    
    
```
